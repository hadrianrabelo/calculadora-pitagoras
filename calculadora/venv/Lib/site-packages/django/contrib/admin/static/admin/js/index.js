import { parseSerializedArray, filterIsNaN } from "./functions";
import { API_HOST } from "./configs";


$("#form-pythagoras").submit(function(e) {
    e.preventDefault();

    console.log("Starting to serialize form...");
    const fields = parseSerializedArray($(this).serializeArray());


    console.log("Starting to filter fields that is NaN...");
    const fieldsNaN = filterIsNaN(fields);

    if (fieldsNaN.length != 1) {
        alert("Por favor, deixe exatamente um campo em branco!");
        throw new Error(`Por favor, deixe exatamente um campo em branco! Campos em branco ${fieldsNaN.length}`)
    }

    $.ajax({
        url: API_HOST,
        method: 'POST',
        data: JSON.stringify({
            leg1: fields[0]["value"],
            leg2: fields[1]["value"],
            hypotenuse: fields[2]["value"]
        })
    }).done(function(data) {
        console.log(data[0]["name"])
    });
});

